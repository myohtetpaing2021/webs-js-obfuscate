!DOCTYPE html
html lang=my
head
    meta charset=UTF-8
    meta name=viewport content=width=device-width, initial-scale=1.0
    title2D Master - ·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫ Apptitle
    script src=httpscdn.tailwindcss.comscript
    link rel=preconnect href=httpsfonts.googleapis.com
    link rel=preconnect href=httpsfonts.gstatic.com crossorigin
    link href=httpsfonts.googleapis.comcss2family=Padaukwght@400;700&display=swap rel=stylesheet
    style
        body {
            font-family 'Padauk', sans-serif;
            background-color #0d1117;
        }
        .card {
            background-color #161b22;
            border 1px solid #30363d;
            border-radius 0.75rem;
            position relative;
            overflow hidden;
        }
        .cardbefore {
            content '';
            position absolute;
            top 0;
            left 0;
            right 0;
            height 2px;
            background linear-gradient(to right, #1e3a8a, #3b82f6);
        }
        .table-header {
            background-color #1f242c;
        }
        .table-rowhover {
            background-color #21262d;
        }
         Hide arrows from number input 
        input[type=number]-webkit-inner-spin-button,
        input[type=number]-webkit-outer-spin-button {
            -webkit-appearance none;
            margin 0;
        }
        input[type=number] {
            -moz-appearance textfield;
        }
        @media print {
            body  {
                visibility hidden;
            }
            #print-section, #print-section  {
                visibility visible;
            }
            #print-section {
                position absolute;
                left 0;
                top 0;
                width 100%;
            }
            table {
                width 100%;
                border-collapse collapse;
            }
            th, td {
                border 1px solid black;
                padding 8px;
                text-align left;
            }
        }
    style
head
body class=text-gray-300 min-h-screen p-4 mdp-8

    div class=w-full max-w-7xl mx-auto space-y-6
        header class=text-center
            h1 class=text-3xl mdtext-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-yellow-3002D Master - ·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ·ÄÑ·Ä∫ Apph1
            p class=text-gray-400 mt-2·Äû·ÄÑ·Ä∫·Ä∑·Äõ·Ä≤·Ä∑ 2D ·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·Ä±·Ä∏·Åä ·Ä°·Äõ·Äæ·ÄØ·Ä∂·Ä∏·Ä°·Äô·Äº·Äê·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äê·Ä≠·ÄÄ·Äª·Äû·Ä±·ÄÅ·Äª·Ä¨·ÄÖ·ÄΩ·Ä¨ ·Äô·Äæ·Äê·Ä∫·Äû·Ä¨·Ä∏ ·ÄÖ·ÄÆ·Äô·Ä∂·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Ä´p
        header

        main class=grid grid-cols-1 lggrid-cols-3 gap-6
            !-- Left Column --
            div class=lgcol-span-1 space-y-6
                !-- Live Portfolio --
                div class=card p-6
                    h2 class=flex items-center text-xl font-bold text-yellow-300 mb-4
                        svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122 svg
                        ·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÇ·Äè·Äî·Ä∫·Ä∏ ·Äê·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÖ·ÄÖ·Ä∫·Äõ·Äî·Ä∫
                    h2
                     div class=mb-4
                        label for=live2D class=block mb-2 text-sm font-medium text-gray-400·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠ 2D ·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÇ·Äè·Äî·Ä∫·Ä∏label
                        input type=text id=live2D class=bg-gray-900 border border-gray-600 text-green-400 text-3xl font-bold text-center rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5 placeholder=-- maxlength=2
                    div
                    button id=checkPortfolioBtn class=w-full text-white bg-indigo-600 hoverbg-indigo-700 font-bold rounded-lg text-md px-5 py-3 text-center transition·Äê·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÖ·ÄÖ·Ä∫·Äô·Ää·Ä∫button
                    div id=portfolioResult class=mt-4 text-centerdiv
                div

                 !-- Input Form --
                div class=card p-6
                    h2 class=flex items-center text-xl font-bold text-yellow-300 mb-4
                        svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z svg
                        ·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏ ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äõ·Äî·Ä∫
                    h2
                    div class=space-y-4
                        div
                            label for=initialCapital class=block mb-2 text-sm font-medium text-gray-400·Äô·Ä≠·Äô·Ä≠·Åè ·Äô·Ä∞·Äú·Ä°·Äõ·ÄÑ·Ä∫·Ä∏·ÄÑ·ÄΩ·Ä± (MMK)label
                            input type=number id=initialCapital class=bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5 placeholder=50000
                        div
                        div
                            label for=customerName class=block mb-2 text-sm font-medium text-gray-400Customer ·Ä°·Äô·Ää·Ä∫label
                            input type=text id=customerName class=bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5 placeholder=Aung Aung
                        div
                        div
                            label for=betNumbers class=block mb-2 text-sm font-medium text-gray-4002D ·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏label
                            input type=text id=betNumbers class=bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5 placeholder=26R, (42,45)R, 00-99
                        div
                        div
                            label for=betAmountPerNumber class=block mb-2 text-sm font-medium text-gray-400·Äê·ÄÖ·Ä∫·ÄÄ·ÄΩ·ÄÄ·Ä∫·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä± (MMK)label
                            input type=number id=betAmountPerNumber class=bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5 placeholder=1000
                        div
                        div
                            label for=paymentMethod class=block mb-2 text-sm font-medium text-gray-400·Äò·Äè·Ä∫·Ä°·Äô·Äª·Ä≠·ÄØ·Ä∏·Ä°·ÄÖ·Ä¨·Ä∏label
                            select id=paymentMethod class=bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5
                                option value=KpayKpayoption
                                option value=WavepayWavePayoption
                            select
                        div
                        button id=addTransactionBtn class=w-full text-white bg-blue-600 hoverbg-blue-700 focusring-4 focusoutline-none focusring-blue-800 font-bold rounded-lg text-md px-5 py-3 text-center transition·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äë·Ää·Ä∑·Ä∫·Äô·Ää·Ä∫button
                    div
                div
            div
            
            !-- Right Column --
            div class=lgcol-span-2 space-y-6
                !-- Summaries --
                div class=grid grid-cols-1 mdgrid-cols-2 gap-6
                     !-- Agent Summary --
                    div id=agentSummaryContainer class=card p-6 hidden
                        h2 class=flex items-center text-xl font-bold text-yellow-300 mb-4
                            svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z svg
                            ·Äî·Ä±·Ä∑·ÄÖ·Äâ·Ä∫·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫
                        h2
                        div class=space-y-3 text-sm
                            div class=flex justify-between items-centerspan class=text-gray-400·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äë·Ä≠·ÄØ·Ä∏·ÄÇ·Äè·Äî·Ä∫·Ä∏span span id=totalUniqueNumbers class=font-bold text-lg text-white0spandiv
                            div class=flex justify-between items-centerspan class=text-gray-400·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±span span id=totalAgentBetAmount class=font-bold text-lg text-white0 MMKspandiv
                            div class=border-t border-gray-700 pt-3 mt-2
                                 label for=customerFilterSelect class=block mb-2 text-sm font-medium text-gray-400Customer ·Ä°·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÖ·ÄÖ·Ä∫·Äõ·Äî·Ä∫label
                                 select id=customerFilterSelect class=block w-full bg-gray-900 border border-gray-600 rounded-md p-2 text-white focusring-blue-500 focusborder-blue-500 text-smselect
                            div
                            div id=customerSpecificSummary class=hidden border-t border-gray-700 pt-3 mt-2 space-y-2
                                h3 id=selectedCustomerName class=font-semibold text-yellow-200h3
                                div class=flex justify-betweenspan class=text-gray-400·Äë·Ä≠·ÄØ·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ ·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏spanspan id=customerTotalNumbers class=font-bold text-white0spandiv
                                div class=flex justify-betweenspan class=text-gray-400·Äë·Ä≠·ÄØ·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ ·ÄÑ·ÄΩ·Ä±spanspan id=customerTotalAmount class=font-bold text-white0 MMKspandiv
                                div
                                    button id=toggleCustomerNumbersBtn class=text-blue-400 hovertext-blue-300 text-xs font-semibold[·Äë·Ä≠·ÄØ·Ä∏·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏ ·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äõ·Äî·Ä∫]button
                                    div id=customerNumbersList class=hidden mt-2 p-2 bg-gray-900 rounded-md text-xs text-gray-400 break-words max-h-20 overflow-y-autodiv
                                div
                            div
                        div
                    div
                     !-- Financial Summary --
                    div id=results class=card p-6 hidden
                        h2 class=flex items-center text-xl font-bold text-yellow-300 mb-4
                           svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M13 7h8m0 0v8m0-8l-8 8-4-4-6 6 svg
                            ·ÄÑ·ÄΩ·Ä±·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫
                        h2
                        div class=space-y-3 text-sm
                            div class=flex justify-between items-centerspan class=text-gray-400·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±span span id=totalBet class=font-bold text-lg text-red-4000 MMKspandiv
                            div class=flex justify-between items-centerspan class=text-gray-400·ÄÄ·Äª·Äî·Ä∫·Äõ·Äæ·Ä≠·ÄÑ·ÄΩ·Ä±span span id=finalCapital class=font-bold text-lg text-green-4000 MMKspandiv
                            div id=bankSummary class=mt-2 border-t border-gray-700 pt-3
                               div class=p-2 bg-gray-900 rounded-lg mb-2
                                 p class=font-bold text-md text-blue-400Kpayp
                                 div class=flex justify-between text-xsspan·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Ä°·Äë·ÄΩ·ÄÄ·Ä∫spanspan id=kpayOut0 MMKspandiv
                               div
                               div class=p-2 bg-gray-900 rounded-lg
                                 p class=font-bold text-md text-green-400WavePayp
                                 div class=flex justify-between text-xsspan·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Ä°·Äë·ÄΩ·ÄÄ·Ä∫spanspan id=wavepayOut0 MMKspandiv
                               div
                            div
                        div
                    div
                div
                
                !-- Transaction Table --
                div id=transactionListContainer class=card hidden
                     div class=p-6 flex justify-between items-center
                         h2 class=flex items-center text-xl font-bold text-yellow-300
                            svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z svg
                            ·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·Ä±·Ä∏·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏
                        h2
                        div class=flex space-x-2
                            button id=printRecordsBtn class=bg-gray-600 hoverbg-gray-500 text-white font-bold py-2 px-3 rounded-lg text-xsPrint ·Äë·ÄØ·Äê·Ä∫·Äô·Ää·Ä∫button
                            button id=exportRecordsBtn class=bg-blue-600 hoverbg-blue-700 text-white font-bold py-2 px-3 rounded-lg text-xsData ·Äë·ÄØ·Äê·Ä∫·Äô·Ää·Ä∫button
                        div
                    div
                    div class=overflow-x-auto
                        table class=w-full text-sm text-left text-gray-400
                            thead class=text-xs text-gray-400 uppercase table-header
                                tr
                                    th scope=col class=px-6 py-3Customerth
                                    th scope=col class=px-6 py-3·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±th
                                    th scope=col class=px-6 py-3·Äò·Äè·Ä∫th
                                    th scope=col class=px-6 py-3 text-rightActionsth
                                tr
                            thead
                            tbody id=transactionList
                                !-- JS will insert rows here --
                            tbody
                        table
                    div
                div

                !-- Settings --
                div id=settingsSection class=card p-6 space-y-4
                    h2 class=flex items-center text-xl font-bold text-red-400 mb-2
                        svg xmlns=httpwww.w3.org2000svg class=h-6 w-6 mr-2 fill=none viewBox=0 0 24 24 stroke=currentColor stroke-width=2path stroke-linecap=round stroke-linejoin=round d=M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0 3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z path stroke-linecap=round stroke-linejoin=round d=M15 12a3 3 0 11-6 0 3 3 0 016 0z svg
                        Settings
                    h2
                     div class=flex justify-between items-center p-3 bg-gray-900 rounded-lg
                        div
                            p class=text-sm font-semibold text-blue-300Data ·Äë·ÄØ·Äê·Ä∫·Äë·Ää·Ä∑·Ä∫ ·Äï·Äº·ÄØ·Äú·ÄØ·Äï·Ä∫·Äõ·Äî·Ä∫p
                            p class=text-xs text-gray-500Backup ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·Äû·Ä≠·ÄØ·Ä∑·Äô·Äü·ÄØ·Äê·Ä∫ Device ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·ÄØ·Ä∂·Ä∏·Äõ·Äî·Ä∫p
                        div
                        div class=flex space-x-2
                             button id=exportAllDataBtn class=bg-blue-600 hoverbg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex-shrink-0 text-xsData ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·Äë·ÄØ·Äê·Ä∫·Äô·Ää·Ä∫button
                             button id=importDataBtn class=bg-green-600 hoverbg-green-700 text-white font-bold py-2 px-4 rounded-lg flex-shrink-0 text-xsData ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·Äë·Ää·Ä∑·Ä∫·Äô·Ää·Ä∫button
                             input type=file id=importFileInput class=hidden accept=.json
                        div
                    div
                     div class=flex justify-between items-center p-3 bg-gray-900 rounded-lg
                        div
                            p class=text-sm font-semibold text-red-400Data ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·Äñ·Äª·ÄÄ·Ä∫·Äõ·Äî·Ä∫p
                            p class=text-xs text-gray-500·Ä§·Äú·ÄØ·Äï·Ä∫·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ ·Äï·Äº·Äî·Ä∫·Äï·Äº·ÄÑ·Ä∫·Åç·Äô·Äõ·Äï·Ä´·Åãp
                        div
                        button id=deleteAllDataBtn class=bg-red-600 hoverbg-red-700 text-white font-bold py-2 px-4 rounded-lg flex-shrink-0 text-xs·Äí·Ä±·Äê·Ä¨·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·Äñ·Äª·ÄÄ·Ä∫·Äô·Ää·Ä∫button
                    div
                div
            div
        main
    div

    !-- Edit Modal --
    div id=editModal class=fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50
        div class=bg-gray-800 rounded-2xl shadow-xl w-full max-w-md p-6 border border-gray-600
            h3 class=text-xl font-bold text-center mb-4 text-yellow-300·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏ ·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·Äõ·Äî·Ä∫h3
            input type=hidden id=editTransactionId
            div class=space-y-4
                 div
                    label for=editCustomerName class=block mb-2 text-sm font-medium text-gray-400Customer ·Ä°·Äô·Ää·Ä∫label
                    input type=text id=editCustomerName class=bg-gray-900 border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5
                div
                div
                    label for=editBetNumbers class=block mb-2 text-sm font-medium text-gray-4002D ·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏label
                    input type=text id=editBetNumbers class=bg-gray-900 border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5
                div
                div
                    label for=editBetAmountPerNumber class=block mb-2 text-sm font-medium text-gray-400·Äê·ÄÖ·Ä∫·ÄÄ·ÄΩ·ÄÄ·Ä∫·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±label
                    input type=number id=editBetAmountPerNumber class=bg-gray-900 border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5
                div
                div
                    label for=editPaymentMethod class=block mb-2 text-sm font-medium text-gray-400·Äò·Äè·Ä∫·Ä°·Äô·Äª·Ä≠·ÄØ·Ä∏·Ä°·ÄÖ·Ä¨·Ä∏label
                    select id=editPaymentMethod class=bg-gray-900 border-gray-600 text-white text-sm rounded-lg focusring-blue-500 focusborder-blue-500 block w-full p-2.5
                        option value=KpayKpayoption
                        option value=WavepayWavePayoption
                    select
                div
            div
            div class=mt-6 flex justify-end space-x-3
                button id=cancelEditBtn class=px-5 py-2.5 bg-gray-600 hoverbg-gray-500 rounded-lg text-sm font-bold·Äô·Äú·ÄØ·Äï·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äï·Ä´button
                button id=saveChangesBtn class=px-5 py-2.5 bg-yellow-500 hoverbg-yellow-600 rounded-lg text-sm font-bold text-gray-900·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Ää·Ä∫button
            div
        div
    div

    !-- Confirmation Modal --
    div id=confirmationModal class=fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50
        div class=bg-gray-800 rounded-2xl shadow-xl w-full max-w-sm p-6 border border-gray-600 text-center
            div class=mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-900 mb-4
                svg class=h-6 w-6 text-red-400 xmlns=httpwww.w3.org2000svg fill=none viewBox=0 0 24 24 stroke-width=1.5 stroke=currentColorpath stroke-linecap=round stroke-linejoin=round d=M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z svg
            div
            h3 class=text-xl font-bold mb-2 text-white·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏h3
            p class=text-sm text-gray-400 mb-6·Äû·ÄÑ·Ä∫·Åè ·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏ ·Ä°·Äï·Äº·ÄÆ·Ä∏·Äê·Ä≠·ÄØ·ÄÑ·Ä∫ ·Äñ·Äª·ÄÄ·Ä∫·Äû·Ä≠·Äô·Ä∫·Ä∏·Äû·ÄΩ·Ä¨·Ä∏·Äô·Ää·Ä∫·Äñ·Äº·ÄÖ·Ä∫·Äï·Äº·ÄÆ·Ä∏ ·Äï·Äº·Äî·Ä∫·Äú·Ää·Ä∫·Äõ·Äö·Ä∞·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äô·Ää·Ä∫ ·Äô·Äü·ÄØ·Äê·Ä∫·Äï·Ä´·Åãp
            div class=flex justify-center space-x-4
                button id=cancelDeleteBtn class=px-6 py-2.5 bg-gray-600 hoverbg-gray-500 rounded-lg text-sm font-bold w-full·Äô·Äú·ÄØ·Äï·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äï·Ä´button
                button id=confirmDeleteBtn class=px-6 py-2.5 bg-red-600 hoverbg-red-700 rounded-lg text-sm font-bold text-white w-full·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äû·Ää·Ä∫button
            div
        div
    div
    
    !-- Toast Notification --
    div id=toast class=fixed bottom-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg hidden transition-opacity duration-300
        p id=toast-messagep
    div


    script
         --- STATE ---
        let transactions = [];

         --- DOM ELEMENTS ---
        const initialCapitalInput = document.getElementById('initialCapital');
        const paymentMethodSelect = document.getElementById('paymentMethod');
        const addTransactionBtn = document.getElementById('addTransactionBtn');
        const transactionListContainer = document.getElementById('transactionListContainer');
        const transactionListBody = document.getElementById('transactionList');
        const resultsDiv = document.getElementById('results');
        const checkPortfolioBtn = document.getElementById('checkPortfolioBtn');
        const portfolioResultDiv = document.getElementById('portfolioResult');
        const deleteAllDataBtn = document.getElementById('deleteAllDataBtn');
        
        const customerNameInput = document.getElementById('customerName');
        const betNumbersInput = document.getElementById('betNumbers');
        const betAmountPerNumberInput = document.getElementById('betAmountPerNumber');

        const customerFilterSelect = document.getElementById('customerFilterSelect');

        const editModal = document.getElementById('editModal');
        const editTransactionIdInput = document.getElementById('editTransactionId');
        const editCustomerNameInput = document.getElementById('editCustomerName');
        const editPaymentMethodSelect = document.getElementById('editPaymentMethod');
        const editBetNumbersInput = document.getElementById('editBetNumbers');
        const editBetAmountPerNumberInput = document.getElementById('editBetAmountPerNumber');
        const saveChangesBtn = document.getElementById('saveChangesBtn');
        const cancelEditBtn = document.getElementById('cancelEditBtn');

        const confirmationModal = document.getElementById('confirmationModal');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        
        const printRecordsBtn = document.getElementById('printRecordsBtn');
        const exportRecordsBtn = document.getElementById('exportRecordsBtn');
        const exportAllDataBtn = document.getElementById('exportAllDataBtn');
        const importDataBtn = document.getElementById('importDataBtn');
        const importFileInput = document.getElementById('importFileInput');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');


         --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () = {
            loadData();
            updateUI();
        });

        addTransactionBtn.addEventListener('click', addTransaction);
        initialCapitalInput.addEventListener('input', updateUI);
        checkPortfolioBtn.addEventListener('click', checkPortfolio);
        deleteAllDataBtn.addEventListener('click', () = {
            if (transactions.length  0  initialCapitalInput.value) {
                confirmationModal.classList.remove('hidden');
            }
        });
        customerFilterSelect.addEventListener('change', handleCustomerFilterChange);
        
        saveChangesBtn.addEventListener('click', saveTransactionChanges);
        cancelEditBtn.addEventListener('click', closeEditModal);

        confirmDeleteBtn.addEventListener('click', () = {
            clearAllData();
            confirmationModal.classList.add('hidden');
        });
        cancelDeleteBtn.addEventListener('click', () = {
            confirmationModal.classList.add('hidden');
        });

        printRecordsBtn.addEventListener('click', printRecords);
        exportRecordsBtn.addEventListener('click', exportRecords);
        exportAllDataBtn.addEventListener('click', exportAllData);
        importDataBtn.addEventListener('click', () = importFileInput.click());
        importFileInput.addEventListener('change', importData);

         --- CORE APP FUNCTIONS ---
        
        function showToast(message, isSuccess = true) {
            toastMessage.textContent = message;
            toast.className = `fixed bottom-5 right-5 text-white py-2 px-4 rounded-lg shadow-lg transition-opacity duration-300 ${isSuccess  'bg-green-600'  'bg-red-600'}`;
            toast.classList.remove('hidden');
            setTimeout(() = {
                toast.classList.add('hidden');
            }, 3000);
        }

        function parseBetNumbers(inputString) {
            const numbersSet = new Set();
            let processedString = inputString;

             Regex to find all occurrences of (...)r or (...)R
            const groupRRegex = (([^)]+))[rR]g;
            let match;

             Step 1 Process all (...)R groups first
            let tempStringForParsing = processedString;
            while ((match = groupRRegex.exec(processedString)) !== null) {
                const numbersInside = match[1];  The content inside the parentheses
                const individualNumbers = numbersInside.split(',').map(n = n.trim());
                for (const numStr of individualNumbers) {
                    if (!isNaN(numStr) && numStr.length  0) {
                         const paddedNumStr = numStr.padStart(2, '0');
                         const reversedNumStr = paddedNumStr.split('').reverse().join('');
                         numbersSet.add(paddedNumStr);
                         numbersSet.add(reversedNumStr);
                    }
                }
                 Mark this part as processed by replacing it with an empty string
                tempStringForParsing = tempStringForParsing.replace(match[0], '');
            }
            
             Step 2 Process the rest of the string.
             Use regex to split by comma or space, and filter out empty strings
            const parts = tempStringForParsing.split([ ,]+).filter(p = p.trim() !== '');

            for (const part of parts) {
                if (!part) continue;
                const lowerPart = part.toLowerCase();

                 Handles 58R format
                if (lowerPart.endsWith('r')) {
                    const numStr = lowerPart.slice(0, -1);
                    if (!isNaN(numStr) && numStr.length  0) {
                        const paddedNumStr = numStr.padStart(2, '0');
                        const reversedNumStr = paddedNumStr.split('').reverse().join('');
                        numbersSet.add(paddedNumStr);
                        numbersSet.add(reversedNumStr);
                    }
                } 
                 Handles 00-99 or 00to99 format
                else if (lowerPart.includes('to')  lowerPart.includes('-')) {
                    const delimiter = lowerPart.includes('to')  'to'  '-';
                    const range = lowerPart.split(delimiter).map(n = n.trim());
                    if (range.length === 2) {
                        const start = parseInt(range[0], 10);
                        const end = parseInt(range[1], 10);
                        if (!isNaN(start) && !isNaN(end) && start = end) {
                            for (let i = start; i = end; i++) {
                                if (i  100) {
                                   numbersSet.add(i.toString().padStart(2, '0'));
                                }
                            }
                        }
                    }
                }
                 Handles single number like 42
                else {
                    if (!isNaN(part)) {
                       numbersSet.add(part.padStart(2, '0'));
                    }
                }
            }
            return Array.from(numbersSet);
        }

        function addTransaction() {
            const customerName = customerNameInput.value.trim();
            const method = paymentMethodSelect.value;
            const numbersRaw = betNumbersInput.value.trim();
            const amountPerNumber = parseFloat(betAmountPerNumberInput.value);
            
            if (!customerName  !numbersRaw  !amountPerNumber  amountPerNumber = 0) {
                showToast('·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äï·Äº·Ää·Ä∫·Ä∑·ÄÖ·ÄØ·Ä∂·ÄÖ·ÄΩ·Ä¨ ·Äñ·Äº·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã', false);
                return;
            }

            const numbers = parseBetNumbers(numbersRaw);
            if (numbers.length === 0) {
                showToast('·Äë·Ä≠·ÄØ·Ä∏·ÄÇ·Äè·Äî·Ä∫·Ä∏ format ·Äô·Äô·Äæ·Äî·Ä∫·Äï·Ä´·Åã ·Ä•·Äï·Äô·Ä¨ 58R, (42,45)R, 00-10', false);
                return;
            }
            
            const transaction = { 
                id Date.now(), 
                method method, 
                type 'bet', 
                customerName customerName,
                rawNumbers numbersRaw,
                numbers numbers,
                amount_per_number amountPerNumber,
                amount numbers.length  amountPerNumber
            };

            transactions.push(transaction);
            updateUI();
            showToast('·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã');

            customerNameInput.value = '';
            betNumbersInput.value = '';
            betAmountPerNumberInput.value = '';
        }
        
        function openEditModal(id) {
            const transaction = transactions.find(t = t.id === id);
            if (!transaction) return;

            editTransactionIdInput.value = transaction.id;
            editCustomerNameInput.value = transaction.customerName;
            editPaymentMethodSelect.value = transaction.method;
            editBetNumbersInput.value = transaction.rawNumbers; 
            editBetAmountPerNumberInput.value = transaction.amount_per_number;

            editModal.classList.remove('hidden');
        }

        function closeEditModal() {
            editModal.classList.add('hidden');
        }

        function saveTransactionChanges() {
            const id = parseInt(editTransactionIdInput.value);
            const transactionIndex = transactions.findIndex(t = t.id === id);
            if (transactionIndex === -1) return;

            const customerName = editCustomerNameInput.value.trim();
            const method = editPaymentMethodSelect.value;
            const numbersRaw = editBetNumbersInput.value.trim();
            const amountPerNumber = parseFloat(editBetAmountPerNumberInput.value);
            
            if (!customerName  !numbersRaw  !amountPerNumber  amountPerNumber = 0) {
                 showToast('·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äï·Äº·Ää·Ä∫·Ä∑·ÄÖ·ÄØ·Ä∂·ÄÖ·ÄΩ·Ä¨ ·Äñ·Äº·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã', false);
                return;
            }
            const numbers = parseBetNumbers(numbersRaw);
            if (numbers.length === 0) {
                showToast('·Äë·Ä≠·ÄØ·Ä∏·ÄÇ·Äè·Äî·Ä∫·Ä∏ format ·Äô·Äô·Äæ·Äî·Ä∫·Äï·Ä´·Åã', false);
                return;
            }
            
            transactions[transactionIndex] = { 
                ...transactions[transactionIndex], 
                method, 
                customerName,
                rawNumbers numbersRaw,
                numbers,
                amount_per_number amountPerNumber,
                amount numbers.length  amountPerNumber
            };

            updateUI();
            closeEditModal();
            showToast('·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã');
        }

        function checkPortfolio() {
            const live2D = document.getElementById('live2D').value.trim();
            if (!live2D  isNaN(live2D)  live2D.length  2) {
                portfolioResultDiv.innerHTML = `p class=text-red-4002D ·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÇ·Äè·Äî·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äô·Äæ·Äî·Ä∫·ÄÄ·Äî·Ä∫·ÄÖ·ÄΩ·Ä¨·Äë·Ää·Ä∑·Ä∫·Äï·Ä´·Åãp`;
                return;
            }
            
            const paddedLive2D = live2D.padStart(2, '0');
            const winners = transactions.filter(t = t.type === 'bet' && t.numbers.includes(paddedLive2D));

            if (winners.length  0) {
                portfolioResultDiv.innerHTML = 'h4 class=text-lg font-bold mb-2 text-white·ÄÄ·Ä∂·Äë·Ä∞·Ä∏·Äõ·Äæ·ÄÑ·Ä∫·Äô·Äª·Ä¨·Ä∏h4' + winners.map(win = {
                    const winningAmount = win.amount_per_number  80;
                    return `div class=text-green-400 font-semibold p-2 bg-green-90050 rounded-lg mb-2 text-smüéâ ${win.customerName} (2D ${paddedLive2D})br·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä± ${win.amount_per_number.toLocaleString()} MMK, ·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÑ·ÄΩ·Ä± ${winningAmount.toLocaleString()} MMKdiv`;
                }).join('');
            } else {
                portfolioResultDiv.innerHTML = `p class=text-yellow-400·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äë·Ä≤·Äô·Äæ ·Äï·Ä±·Ä´·ÄÄ·Ä∫·Äû·Ä∞·Äô·Äõ·Äæ·Ä≠·Äï·Ä´·Åãp`;
            }
        }
        
        function clearAllData() {
            transactions = [];
            initialCapitalInput.value = '';
            localStorage.removeItem('2dMasterData');
            updateUI();
            showToast('Data ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Äª·ÄÄ·Ä∫·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Ä´·Äï·Äº·ÄÆ·Åã');
        }

        function deleteTransaction(id) {
            transactions = transactions.filter(t = t.id !== id);
            updateUI();
            showToast('·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ·ÄÄ·Ä≠·ÄØ ·Äñ·Äª·ÄÄ·Ä∫·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Ä´·Äï·Äº·ÄÆ·Åã');
        }

        function updateUI() {
            renderTransactionTable();
            calculateAndRenderSummaries();
            calculateAndRenderAgentSummary();
            saveData();
        }

        function renderTransactionTable() {
            const selectedCustomer = customerFilterSelect.value;
            
            const transactionsToDisplay = selectedCustomer === 'all'  !selectedCustomer
                 transactions
                 transactions.filter(t = t.customerName === selectedCustomer);

            if (transactions.length === 0) {
                transactionListContainer.classList.add('hidden');
                return;
            }
            
            transactionListContainer.classList.remove('hidden');
            transactionListBody.innerHTML = '';

            if (transactionsToDisplay.length === 0) {
                transactionListBody.innerHTML = 'trtd colspan=4 class=px-6 py-4 text-center text-gray-500·Ä§ Customer ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏ ·Äô·Äõ·Äæ·Ä≠·Äï·Ä´·Åãtdtr';
                return;
            }

            transactionsToDisplay.slice().reverse().forEach(t = {
                const tr = document.createElement('tr');
                tr.className = 'table-row border-b border-gray-700';
                tr.innerHTML = `
                    td class=px-6 py-4
                        div class=font-medium text-white${t.customerName}div
                        div class=text-xs text-gray-500 title=${t.numbers.join(', ')}${t.rawNumbers} (${t.amount_per_number.toLocaleString()})div
                    td
                    td class=px-6 py-4 font-bold text-red-400${t.amount.toLocaleString()} MMKtd
                    td class=px-6 py-4
                        span class=text-xs font-semibold px-2 py-1 rounded-full ${t.method === 'Kpay'  'bg-blue-900 text-blue-300'  'bg-green-900 text-green-300'}${t.method}span
                    td
                    td class=px-6 py-4 text-right
                         button onclick=openEditModal(${t.id}) class=text-blue-400 hovertext-blue-300 p-1 title=·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·Äõ·Äî·Ä∫
                            svg xmlns=httpwww.w3.org2000svg class=h-5 w-5 viewBox=0 0 20 20 fill=currentColorpath d=M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z path fill-rule=evenodd d=M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z clip-rule=evenodd svg
                        button
                        button onclick=deleteTransaction(${t.id}) class=text-red-500 hovertext-red-400 p-1 title=·Äñ·Äª·ÄÄ·Ä∫·Äõ·Äî·Ä∫
                            svg xmlns=httpwww.w3.org2000svg class=h-5 w-5 viewBox=0 0 20 20 fill=currentColorpath fill-rule=evenodd d=M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z clip-rule=evenodd svg
                        button
                    td
                `;
                transactionListBody.appendChild(tr);
            });
        }

        function handleCustomerFilterChange() {
            const selectedCustomer = customerFilterSelect.value;
            const summaryDiv = document.getElementById('customerSpecificSummary');
            const toggleBtn = document.getElementById('toggleCustomerNumbersBtn');
            const numbersListDiv = document.getElementById('customerNumbersList');
            
            if (selectedCustomer === 'all') {
                summaryDiv.classList.add('hidden');
            } else {
                const customerTxs = transactions.filter(t = t.customerName === selectedCustomer);
                const allNumbers = new Set(customerTxs.flatMap(t = t.numbers));
                const totalAmount = customerTxs.reduce((sum, t) = sum + t.amount, 0);

                document.getElementById('selectedCustomerName').textContent = `${selectedCustomer} ·Åè ·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏`;
                document.getElementById('customerTotalNumbers').textContent = allNumbers.size;
                document.getElementById('customerTotalAmount').textContent = `${totalAmount.toLocaleString()} MMK`;
                numbersListDiv.textContent = Array.from(allNumbers).sort().join(', ');

                toggleBtn.onclick = () = numbersListDiv.classList.toggle('hidden');
                numbersListDiv.classList.add('hidden'); 
                summaryDiv.classList.remove('hidden');
            }
            renderTransactionTable();
        }

        function calculateAndRenderAgentSummary() {
            const agentSummaryContainer = document.getElementById('agentSummaryContainer');
            if (transactions.length === 0) {
                agentSummaryContainer.classList.add('hidden');
                return;
            }
            agentSummaryContainer.classList.remove('hidden');

            const allNumbers = new Set(transactions.flatMap(t = t.numbers));
            const totalBetAmount = transactions.reduce((sum, t) = sum + t.amount, 0);
            const customerNames = [...new Set(transactions.map(t = t.customerName))].sort();

            document.getElementById('totalUniqueNumbers').textContent = allNumbers.size;
            document.getElementById('totalAgentBetAmount').textContent = `${totalBetAmount.toLocaleString()} MMK`;

            const currentSelectedCustomer = customerFilterSelect.value;
            customerFilterSelect.innerHTML = 'option value=allCustomer ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏option'; 
            customerNames.forEach(name = {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                customerFilterSelect.appendChild(option);
            });
            
            customerFilterSelect.value = customerNames.includes(currentSelectedCustomer)  currentSelectedCustomer  'all';
            handleCustomerFilterChange();
        }

        function calculateAndRenderSummaries() {
            const resultsContainer = document.getElementById('results');
            if (transactions.length === 0 && !initialCapitalInput.value) {
                resultsContainer.classList.add('hidden');
                return;
            }
            resultsContainer.classList.remove('hidden');

            const initialCapital = parseFloat(initialCapitalInput.value)  0;
            const totalBet = transactions.reduce((sum, t) = sum + t.amount, 0);
            const kpayOut = transactions.filter(t = t.method === 'Kpay').reduce((sum, t) = sum + t.amount, 0);
            const wavepayOut = transactions.filter(t = t.method === 'Wavepay').reduce((sum, t) = sum + t.amount, 0);
            
            document.getElementById('totalBet').textContent = `${totalBet.toLocaleString()} MMK`;
            document.getElementById('finalCapital').textContent = `${(initialCapital - totalBet).toLocaleString()} MMK`;
            document.getElementById('kpayOut').textContent = `${kpayOut.toLocaleString()} MMK`;
            document.getElementById('wavepayOut').textContent = `${wavepayOut.toLocaleString()} MMK`;
        }
        
         --- DATA PERSISTENCE & IMPORTEXPORT ---
        function saveData() {
            const dataToSave = {
                initialCapital initialCapitalInput.value,
                transactions transactions
            };
            localStorage.setItem('2dMasterData', JSON.stringify(dataToSave));
        }
        
        function loadData() {
            const savedData = localStorage.getItem('2dMasterData');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    transactions = parsedData.transactions  [];
                    initialCapitalInput.value = parsedData.initialCapital  '';
                } catch (e) {
                    console.error(Error parsing saved data, e);
                    transactions = [];
                }
            }
        }
        
        function downloadJSON(data, filename) {
            const blob = new Blob([JSON.stringify(data, null, 2)], { type 'applicationjson' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function exportRecords() {
            const selectedCustomer = customerFilterSelect.value;
            
            const transactionsToExport = selectedCustomer === 'all'  !selectedCustomer
                 transactions
                 transactions.filter(t = t.customerName === selectedCustomer);

            if (transactionsToExport.length === 0) {
                 showToast('·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·Äõ·Äî·Ä∫ Data ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´·Åã', false);
                return;
            }
            
            const filename = selectedCustomer === 'all'  !selectedCustomer
                 '2d_records_backup_all.json'
                 `2d_records_backup_${selectedCustomer}.json`;
                
            downloadJSON(transactionsToExport, filename);
            showToast('·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ·Åã');
        }

        function exportAllData() {
             if (transactions.length === 0 && !initialCapitalInput.value) {
                showToast('·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·Äõ·Äî·Ä∫ Data ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´·Åã', false);
                return;
            }
            const dataToExport = {
                initialCapital initialCapitalInput.value,
                transactions transactions
            };
            downloadJSON(dataToExport, '2d_master_full_backup.json');
            showToast('Data ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏·ÄÄ·Ä≠·ÄØ ·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ·Åã');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                     Check if it's a full backup or just records
                    if (importedData.hasOwnProperty('initialCapital') && importedData.hasOwnProperty('transactions')) {
                        initialCapitalInput.value = importedData.initialCapital;
                        transactions = importedData.transactions;
                    } else if (Array.isArray(importedData)) {
                         Assuming it's an array of transactions if not a full backup
                        transactions = importedData;
                    } else {
                         throw new Error('Invalid file format');
                    }
                    updateUI();
                    showToast('Data ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã');
                } catch (error) {
                    console.error('Failed to import data', error);
                    showToast('Data ·Äñ·Ä≠·ÄØ·ÄÑ·Ä∫ format ·Äô·Äô·Äæ·Äî·Ä∫·Äï·Ä´·Åã', false);
                } finally {
                     Reset file input to allow re-uploading the same file
                    importFileInput.value = ''; 
                }
            };
            reader.readAsText(file);
        }

        function printRecords() {
            const selectedCustomer = customerFilterSelect.value;
            const transactionsToPrint = selectedCustomer === 'all'  !selectedCustomer
                 transactions
                 transactions.filter(t = t.customerName === selectedCustomer);

            if (transactionsToPrint.length === 0) {
                showToast('Print ·Äë·ÄØ·Äê·Ä∫·Äõ·Äî·Ä∫ Data ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´·Åã', false);
                return;
            }
            
            const live2D = document.getElementById('live2D').value.trim();
            const paddedLive2D = live2D.padStart(2, '0');

            const allNumbers = new Set(transactionsToPrint.flatMap(t = t.numbers));
            const totalBetAmount = transactionsToPrint.reduce((sum, t) = sum + t.amount, 0);
            let totalWinningAmount = 0;

            const today = new Date();
            const formattedDate = `${(today.getMonth() + 1).toString().padStart(2, '0')}${today.getDate().toString().padStart(2, '0')}${today.getFullYear()}`;
            
            const customerNameToPrint = selectedCustomer === 'all'  !selectedCustomer  'Customer ·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏'  selectedCustomer;

            let printHTML = `
                html
                head
                    title·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·Ä±·Ä∏·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏ - ${customerNameToPrint}title
                    link rel=preconnect href=httpsfonts.googleapis.com
                    link rel=preconnect href=httpsfonts.gstatic.com crossorigin
                    link href=httpsfonts.googleapis.comcss2family=Padaukwght@400;700&display=swap rel=stylesheet
                    style
                        body { 
                            font-family 'Padauk', sans-serif; 
                            margin 20px;
                            color #333;
                        }
                        .header {
                            text-align center;
                            margin-bottom 20px;
                            border-bottom 2px solid #000;
                            padding-bottom 10px;
                        }
                        .header h1 {
                            margin 0;
                            font-size 24px;
                        }
                        .header p {
                            margin 5px 0 0;
                            font-size 14px;
                        }
                        table { 
                            width 100%; 
                            border-collapse collapse; 
                            margin-bottom 20px;
                        }
                        th, td { 
                            border 1px solid #ccc; 
                            padding 10px; 
                            text-align left;
                            font-size 12px;
                        }
                        th { 
                            background-color #f2f2f2; 
                            font-weight bold;
                        }
                        trnth-child(even) {
                            background-color #f9f9f9;
                        }
                        .summary {
                            float right;
                            width 300px;
                            border 1px solid #ccc;
                            padding 15px;
                            background-color #f9f9f9;
                            border-radius 5px;
                        }
                        .summary h3 {
                            margin-top 0;
                            border-bottom 1px solid #ccc;
                            padding-bottom 5px;
                            font-size 16px;
                        }
                        .summary-item {
                            display flex;
                            justify-content space-between;
                            margin-bottom 8px;
                            font-size 14px;
                        }
                        .summary-item spanlast-child {
                            font-weight bold;
                        }
                        .footer {
                            text-align center;
                            margin-top 40px;
                            padding-top 20px;
                            font-size 12px;
                            color #777;
                            clear both;
                            border-top 1px solid #ccc;
                        }
                    style
                head
                body
                    div class=header
                        h12D Master - ·Äë·Ä≠·ÄØ·Ä∏·ÄÄ·Äº·Ä±·Ä∏·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏h1
                        pCustomer strong${customerNameToPrint.toUpperCase()}strongp
                        pstrongDatestrong ${formattedDate}p
                    div

                    table
                        thead
                            tr
                                thCustomerth
                                th·Äë·Ä≠·ÄØ·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ ·ÄÇ·Äè·Äî·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏ (·Äê·ÄÖ·Ä∫·ÄÄ·ÄΩ·ÄÄ·Ä∫·Äà·Ä±·Ä∏)th
                                th·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä± (MMK)th
                                th·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÑ·ÄΩ·Ä± (MMK)th
                            tr
                        thead
                        tbody
            `;

            transactionsToPrint.forEach(t = {
                let winningAmountDisplay = '-';
                if (live2D && !isNaN(live2D) && t.numbers.includes(paddedLive2D)) {
                    const winningAmount = t.amount_per_number  80;
                    totalWinningAmount += winningAmount;
                    winningAmountDisplay = winningAmount.toLocaleString();
                }

                printHTML += `
                    tr
                        td${t.customerName}td
                        td${t.rawNumbers} (${t.amount_per_number.toLocaleString()})td
                        td style=text-align right;${t.amount.toLocaleString()}td
                        td style=text-align right; color green; font-weight bold;${winningAmountDisplay}td
                    tr
                `;
            });

            printHTML += `
                        tbody
                    table

                    div class=summary
                        h3·ÄÑ·ÄΩ·Ä±·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫h3
                        div class=summary-item
                            span·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äë·Ä≠·ÄØ·Ä∏·ÄÇ·Äè·Äî·Ä∫·Ä∏ ·Ä°·Äõ·Ä±·Ä°·Äê·ÄΩ·ÄÄ·Ä∫span
                            span${allNumbers.size}span
                        div
                        div class=summary-item
                            span·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äë·Ä≠·ÄØ·Ä∏·ÄÑ·ÄΩ·Ä±span
                            span${totalBetAmount.toLocaleString()} MMKspan
                        div
                        div class=summary-item style=color green;
                            span·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äï·Ä±·Ä´·ÄÄ·Ä∫·ÄÑ·ÄΩ·Ä±span
                            span${totalWinningAmount.toLocaleString()} MMKspan
                        div
                    div
                    
                    div class=footer
                        pGenerated by MYOHTETPAINGp
                    div
                body
                html
            `;

            const printWindow = window.open('', '_blank');
            printWindow.document.write(printHTML);
            printWindow.document.close();
            printWindow.print();
        }

    script
body
html

